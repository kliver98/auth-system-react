(this["webpackJsonpauth-system-react"]=this["webpackJsonpauth-system-react"]||[]).push([[0],{40:function(e,t,a){e.exports=a(60)},48:function(e,t,a){},49:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(16),o=a.n(l),c=(a(45),a(46),a(48),a(5)),s=a(6),i=a(7),m=a(8),u=(a(49),a(10)),d=function(e){Object(m.a)(a,e);var t=Object(i.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Bienvenido"),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,"En este p\xe1gina web podra adminsitrar cuentas de usuario que estan en dependencias."),r.a.createElement("p",null,"Actualmente solo puede gestionar dependencias y crear usuarios, pero estamos trabajando para mejorar :)"),r.a.createElement("br",null),r.a.createElement("p",null,"En la parte superior derecha encontrara las opciones. Solo debe darle click al simbolo de la flecha."))}}]),a}(n.Component),p=a(11),f=a(18),h="/auth-system-react/",E=a(29);a(54);E.initializeApp({apiKey:"AIzaSyBVdLFVxFB59Ee-oYAar4IM-JB1ETJuBjo",authDomain:"auth-system-react.firebaseapp.com",databaseURL:"https://auth-system-react.firebaseio.com",projectId:"auth-system-react",storageBucket:"auth-system-react.appspot.com",messagingSenderId:"346641420723",appId:"1:346641420723:web:516d4f8678479e181bbbc6"});var v=E,b=a(64),g=a(61),y=a(63),N=a(38),C=a(9),k=function(e){Object(m.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).Form1=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Crear Dependencia"),r.a.createElement(b.a,{className:"mb-5",variant:"info",now:100}),r.a.createElement(g.a,{id:"form",onSubmit:e.handleSubmit},r.a.createElement(g.a.Group,{controlId:"formGridName"},r.a.createElement(g.a.Label,{className:"h4"},"Nombre"),r.a.createElement(g.a.Control,{placeholder:"Ej: Log\xedstica",autoComplete:"off"})),r.a.createElement(g.a.Group,{controlId:"formGridLocation"},r.a.createElement(g.a.Label,{className:"h4"},"Lugar"),r.a.createElement(g.a.Control,{placeholder:"Ej: Cali, Colombia",autoComplete:"off"})),r.a.createElement(g.a.Group,{controlId:"formGroupSelectCustom"},r.a.createElement(g.a.Label,{className:"h4",onClick:e.onClickUpdateCoordinator},"Coordinador ",r.a.createElement(y.a,{variant:"info"},r.a.createElement("i",{className:"fas fa-sync-alt"}))),r.a.createElement(g.a.Control,{as:"select",controlId:"formSelectUser",controlName:"formSelectUser",htmlSize:5},r.a.createElement("option",null,"Cargando..."))),r.a.createElement(g.a.Group,{as:N.a,controlId:"formGridMaxUser"},r.a.createElement(g.a.Label,null,"N\xfamero m\xe1ximo de usuarios"),r.a.createElement(g.a.Control,{onChange:e.handleChangeMaxUsers,placeholder:"Solo n\xfameros",autoComplete:"off"})),r.a.createElement(g.a.Group,{id:"formGridActive"},r.a.createElement(g.a.Check,{type:"checkbox",onClick:function(t){e.setState({active:t.target.checked})},label:"Activar"})),r.a.createElement(y.a,{variant:"primary",type:"submit"},"Crear Dependencia")),e.state.redirect?r.a.createElement(C.a,{to:"/auth-system-react/"}):void 0)},e.getUsers=function(){var t=[];return e.state.db.collection("users").get().then((function(e){e.forEach((function(e){var a=e.data(),n={fullname:a.name+" "+a.last_name,email:a.email,rol:a.rol};t.push(n)}))})),t},e.isNumber=function(e){for(var t=0;t<e.length;t++){var a=e[t];if(!1===Number.isInteger(parseInt(a)))return!1}return!0},e.onClickUpdateCoordinator=function(){e.state.users=e.getUsers(),setTimeout((function(){return e.chargeOptions("formGroupSelectCustom")}),600)},e.handleChangeMaxUsers=function(t){t.preventDefault(),!1===e.isNumber(t.target.value)&&(t.target.value=t.target.value.substr(0,t.target.value.length-1))},e.checkFields=function(e,t,a){return""!==e&&""!==t&&!isNaN(a)},e.submit=function(t){e.state.db.collection("dependencies").add(t),alert("Creado Exitosamente"),e.setState({redirect:!0})},e.componentDidMount=function(){setTimeout((function(){return e.chargeOptions("formGroupSelectCustom")}),800)},e.state={users:[],db:v.firestore(),active:!1,redirect:!1},e.handleChangeMaxUsers=e.handleChangeMaxUsers.bind(Object(p.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(p.a)(e)),e.onClickUpdateCoordinator=e.onClickUpdateCoordinator.bind(Object(p.a)(e)),e}return Object(s.a)(a,[{key:"chargeOptions",value:function(e){for(var t=this.state.users,a=document.getElementById(e);a.options.length>0;)a.remove(0);for(var n in t){var r=document.createElement("option");r.id=t[n].email,r.text=t[n].fullname,a.add(r)}}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=document.getElementById("formGroupSelectCustom").selectedIndex,a={active:this.state.active,coordinator:-1!==t?document.getElementById("formGroupSelectCustom").childNodes[t].getAttribute("id"):"",location:document.getElementById("formGridLocation").value,max_users:parseInt(document.getElementById("formGridMaxUser").value),name:document.getElementById("formGridName").value};this.checkFields(a.name,a.location,a.max_users)?this.submit(a):alert("Todos los campos se deben llenar, excepto Coordinador que lo puede dejar vac\xedo.")}},{key:"render",value:function(){return this.state.users=this.getUsers(),r.a.createElement("div",{className:"container"},r.a.createElement(this.Form1,null))}}]),a}(n.Component),O=Object(f.b)((function(e){return{user:e.user}}))(k),j=a(62),x=function(e){Object(m.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).CardPersonalized=function(){var e=n.state.obj;return r.a.createElement("div",{id:"cardDepItem"},r.a.createElement(j.a,{className:"text-left mb-4"},r.a.createElement(u.a,null,r.a.createElement(j.a.Header,{as:"h5",id:"title"},e.name),r.a.createElement(j.a.Body,null,r.a.createElement(j.a.Title,null,"Coordinador: ",r.a.createElement(u.b,{className:"active",to:h+"user/"+e.coordinator},e.coordinator)),r.a.createElement(j.a.Text,null,"Ubicaci\xf3n: ",e.location),r.a.createElement(j.a.Text,null,"N\xfamero m\xe1ximo de usuarios: ",e.max_users),r.a.createElement(j.a.Text,null,"Usuarios (",e.users?e.users.user_id.length:0,")"),e.users?r.a.createElement("ul",null,e.users?e.users.user_id.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement(u.b,{className:"active",to:h+"user/"+e},e))})):""):"",r.a.createElement(j.a.Text,null,"Activo : ",e.active?"S\xed":"No"),r.a.createElement(y.a,{variant:"secondary",onClick:function(){return n.props.changeToUpdate(e)},className:"mr-2 mb-1"},r.a.createElement("i",{className:"far fa-edit"})," ","Editar dependencia".split(" ")[0]),r.a.createElement(y.a,{variant:"danger",className:"mb-1",onClick:n.handleDelete},r.a.createElement("i",{className:"fas fa-trash"})," ","Eliminar dependencia".split(" ")[0])))))},n.handleDelete=function(){var e=n.state.obj;e.users&&0!==e.users.user_id.length||n.state.db.collection("dependencies").doc(e.id).delete().then((function(){return window.location.href="./all"}))},n.state={editing:!1,db:v.firestore(),obj:e.dependency},n.handleDelete=n.handleDelete.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(this.CardPersonalized,null))}}]),a}(n.Component),I=function(e){Object(m.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).Form1=function(){var t=e.props.dependency;return e.state.dependency=t,r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{id:"form",onSubmit:e.handleSubmit},r.a.createElement(g.a.Group,{controlId:"formGridName"},r.a.createElement(g.a.Label,{className:"h4"},"Nombre"),r.a.createElement(g.a.Control,{placeholder:"Ej: Log\xedstica",autoComplete:"off",defaultValue:t.name})),r.a.createElement(g.a.Group,{controlId:"formGridLocation"},r.a.createElement(g.a.Label,{className:"h4"},"Lugar"),r.a.createElement(g.a.Control,{placeholder:"Ej: Cali, Colombia",autoComplete:"off",defaultValue:t.location})),r.a.createElement(g.a.Group,{controlId:"formGroupSelectCustom"},r.a.createElement(g.a.Label,{className:"h4",onClick:e.onClickUpdateCoordinator},"Coordinador ",r.a.createElement(y.a,{variant:"info"},r.a.createElement("i",{className:"fas fa-sync-alt"}))),r.a.createElement(g.a.Control,{as:"select",controlId:"formSelectUser",controlName:"formSelectUser",htmlSize:5},r.a.createElement("option",null,"Cargando..."))),r.a.createElement(g.a.Group,{as:N.a,controlId:"formGridMaxUser"},r.a.createElement(g.a.Label,null,"N\xfamero m\xe1ximo de usuarios"),r.a.createElement(g.a.Control,{onChange:e.handleChangeMaxUsers,placeholder:"Solo n\xfameros",autoComplete:"off",defaultValue:t.max_users})),r.a.createElement(g.a.Group,{id:"formGridActive"},r.a.createElement(g.a.Check,{type:"checkbox",onClick:function(t){e.setState({active:t.target.checked})},defaultChecked:t.active,label:"Activar"})),r.a.createElement(y.a,{variant:"warning",type:"submit",className:"mr-2"},"Editar"),r.a.createElement(y.a,{variant:"info",onClick:function(e){return window.location.href="./all"}},"Cancelar")),e.state.redirect?r.a.createElement(C.a,{to:"/auth-system-react/"}):void 0)},e.isNumber=function(e){for(var t=0;t<e.length;t++){var a=e[t];if(!1===Number.isInteger(parseInt(a)))return!1}return!0},e.onClickUpdateCoordinator=function(){e.state.users=e.getUsers(),setTimeout((function(){return e.chargeOptions("formGroupSelectCustom")}),600)},e.handleChangeMaxUsers=function(t){t.preventDefault(),!1===e.isNumber(t.target.value)&&(t.target.value=t.target.value.substr(0,t.target.value.length-1))},e.checkFields=function(e,t,a){return""!==e&&""!==t&&!isNaN(a)},e.submit=function(t){e.state.db.collection("dependencies").doc(e.state.dependency.id).set(t).then((function(){return window.location.href="./all"}))},e.getUsers=function(){var t=[];return e.state.db.collection("users").get().then((function(e){e.forEach((function(e){var a=e.data(),n={fullname:a.name+" "+a.last_name,email:a.email,rol:a.rol};t.push(n)}))})),t},e.state={db:v.firestore(),users:[],dependency:{},active:!1},e.handleSubmit=e.handleSubmit.bind(Object(p.a)(e)),e}return Object(s.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=document.getElementById("formGroupSelectCustom").selectedIndex,a={active:this.state.active,coordinator:-1!==t?document.getElementById("formGroupSelectCustom").childNodes[t].getAttribute("id"):"",location:document.getElementById("formGridLocation").value,max_users:parseInt(document.getElementById("formGridMaxUser").value),name:document.getElementById("formGridName").value};this.checkFields(a.name,a.location,a.max_users)?this.submit(a):alert("Todos los campos se deben llenar, excepto Coordinador que lo puede dejar vac\xedo.")}},{key:"chargeOptions",value:function(e){for(var t=this.state.users,a=document.getElementById(e);a.options.length>0;)a.remove(0);for(var n in t){var r=document.createElement("option");r.id=t[n].email,r.text=t[n].fullname,this.state.dependency.coordinator===t[n].email&&(r.selected=!0),a.add(r)}}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){return e.chargeOptions("formGroupSelectCustom")}),600)}},{key:"render",value:function(){return this.state.users=this.getUsers(),r.a.createElement("div",{className:"container"},r.a.createElement(this.Form1,null))}}]),a}(n.Component),U=function(e){Object(m.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).getDependencies=function(){var t=[];return e.state.db.collection("dependencies").get().then((function(e){e.forEach((function(e){var a=e.data(),n={id:e.id,active:a.active,coordinator:a.coordinator,location:a.location,max_users:a.max_users,name:a.name,users:[]};t.push(n)}))})),t},e.getUserDependency=function(){var t=[];return e.state.db.collection("user_dependency").get().then((function(e){e.forEach((function(e){var a=e.data(),n={id:e.id,user_id:a.user_id};t.push(n)}))})),t},e.chargeDependencies=function(t){document.getElementById(t).innerHTML="";for(var a=e.state.dependencies,n=0;n<a.length;n++)a[n].users=e.state.user_dependency.find((function(e){return e.id===a[n].id}));a=(a=a.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}))).map((function(t){return r.a.createElement(x,{dependency:t,key:t.id,changeToUpdate:e.changeToUpdate})})),o.a.render(a,document.getElementById(t))},e.changeToUpdate=function(e){var t=document.getElementById("founds");t.unmountComponentAtNode=!0,o.a.render(r.a.createElement(I,{dependency:e}),t)},e.componentDidMount=function(){setTimeout((function(){return e.chargeDependencies("founds")}),800)},e.state={dependencies:[],user_dependency:[],db:v.firestore()},e}return Object(s.a)(a,[{key:"render",value:function(){return this.state.user_dependency=this.getUserDependency(),this.state.dependencies=this.getDependencies(),r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Gestionar Dependencias"),r.a.createElement(b.a,{className:"mb-5",variant:"info",now:100}),r.a.createElement("div",{id:"founds"}))}}]),a}(n.Component),S={display:"none"},G=function(e){Object(m.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).linked=function(e,t){for(var a=[],n=function(n){var r=e[n],l=t.find((function(e){return e.id===r.id}));r.users=l?l.user_id:[],a.push(r)},r=0;r<e.length;r++)n(r);return a},e.checkFields=function(e){return!(e.dependencies.length<1||""===e.email||""===e.name||""===e.last_name||e.password.length<4||e.valid_until<=(new Date).getTime())},e.submit=function(t){e.state.db.collection("users").doc(t.email).set(t).then((function(){return window.location.href="../"}))},e.getDependencies=function(){var t=[];return e.state.db.collection("dependencies").get().then((function(e){e.forEach((function(e){var a=e.data(),n={id:e.id,name:a.name,coordinator:a.coordinator,max_users:a.max_users,users:[]};t.push(n)}))})),t},e.getUserDependency=function(){var t=[];return e.state.db.collection("user_dependency").get().then((function(e){e.forEach((function(e){var a=e.data(),n={id:e.id,user_id:a.user_id};t.push(n)}))})),t},e.putOptions=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dependenciesSelect",a=[],n=e.getDependencies(),r=e.getUserDependency();setTimeout((function(){a=e.linked(n,r)}),700),setTimeout((function(){return e.chargeOptions(t,a)}),1e3)},e.componentDidMount=function(){e.putOptions()},e.state={db:v.firestore()},e}return Object(s.a)(a,[{key:"chargeOptions",value:function(e,t){for(var a=document.getElementById(e);a.options.length>0;)a.remove(0);for(var n in t){var r=document.createElement("option"),l=t[n];l.users.length>=l.max_users||(r.id=l.id,r.text=l.name+" | ocupaci\xf3n: "+l.users.length+"/"+l.max_users,a.add(r))}}},{key:"Form1",value:function(){var e=this;return r.a.createElement("div",{className:"col-12"},r.a.createElement("form",{className:"form-horizontal",onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("fieldset",null,r.a.createElement("div",{id:"legend"},r.a.createElement("legend",{className:""},"Registrarse"),r.a.createElement("span",{id:"error"})),r.a.createElement("div",{className:"progress mb-2"},r.a.createElement("div",{className:"progress-bar bg-info",role:"progressbar",style:{width:"100%"},"aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"})),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{className:"control-label",htmlFor:"email"},"E-mail"),r.a.createElement("div",{className:"controls"},r.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"example@correo.com",autoComplete:"off",className:"col-10"}))),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{className:"control-label",htmlFor:"password"},"Contrase\xf1a"),r.a.createElement("div",{className:"controls"},r.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"",autoComplete:"off",className:"col-10"}))),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{className:"control-label",htmlFor:"username"},"Nombre"),r.a.createElement("div",{className:"controls"},r.a.createElement("input",{type:"text",id:"username",name:"username",placeholder:"",autoComplete:"off",className:"col-10"}))),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{className:"control-label",htmlFor:"last_name"},"Apellido"),r.a.createElement("div",{className:"controls"},r.a.createElement("input",{type:"text",id:"last_name",name:"last_name",placeholder:"",autoComplete:"off",className:"col-10"}))),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{className:"control-label",htmlFor:"valid_until"},"Cuenta v\xe1lida hasta"),r.a.createElement("div",{className:"controls"},r.a.createElement("input",{type:"datetime-local",id:"valid_until",name:"valid_until",className:"col-10"}))),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{className:"control-label",style:S,htmlFor:"active"},"\xbfCuenta activa?"),r.a.createElement("div",{className:"controls"},r.a.createElement("input",{type:"text",id:"active",name:"active",readOnly:!0,value:"1",autoComplete:"off",style:S,className:"col-10"}))),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{className:"control-label",style:S,htmlFor:"rol"},"Rol"),r.a.createElement("div",{className:"controls"},r.a.createElement("input",{type:"text",id:"rol",name:"rol",readOnly:!0,value:"3OkqwOsjKkjAbSgF5UXW",autoComplete:"off",style:S,className:"col-10"}))),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{className:"control-label",htmlFor:"dependenciesSelect"},"Seleccione Dependencia(s)",r.a.createElement("span",{className:"text-danger",style:{cursor:"pointer"},onClick:function(){return e.putOptions()}}," ",r.a.createElement("i",{className:"fas fa-sync-alt"}))),r.a.createElement("select",{className:"col-10",id:"dependenciesSelect",name:"dependenciesSelect",size:"5",multiple:!0})),r.a.createElement("div",{className:"control-group mt-4"},r.a.createElement("div",{className:"controls"},r.a.createElement("button",{type:"submit",className:"btn btn-success"},"Registrarse"))))))}},{key:"handleSubmit",value:function(e){e.preventDefault();for(var t=document.getElementById("dependenciesSelect"),a=[],n=0;n<t.options.length;n++)t.options[n].selected&&a.push(t.options[n].id);var r=document.getElementById("valid_until").value,l=new Date(r||1603844363).getTime(),o={active:!0,dependencies:a,email:document.getElementById("email").value,name:document.getElementById("username").value,last_name:document.getElementById("last_name").value,password:document.getElementById("username").value,rol:"3OkqwOsjKkjAbSgF5UXW",valid_until:l};console.log(o),this.checkFields(o)?this.submit(o):document.getElementById("error").innerHTML="<span style='color:red;'>Error, verifique los campos</span>"}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},this.Form1())}}]),a}(n.Component),w=Object(f.b)((function(e){return{user:e.user}}))(G),_=function(e){Object(m.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).CardPersonalized=function(){var e=n.state.user;return r.a.createElement("div",{id:"cardUserItem"},r.a.createElement(j.a,{className:"text-left mb-4"},r.a.createElement(u.a,null,r.a.createElement(j.a.Header,{as:"h5",id:"title"},r.a.createElement(u.b,{className:"active",to:h+"user/"+e.name},e.name)),r.a.createElement(j.a.Body,null,r.a.createElement(j.a.Title,null,"Usuario: "),r.a.createElement(y.a,{variant:"secondary",className:"mr-2"},r.a.createElement("i",{className:"far fa-edit"})," Editar"),r.a.createElement(y.a,{variant:"danger",onClick:n.handleDelete},r.a.createElement("i",{className:"fas fa-trash"})," Eliminar")))))},n.handleDelete=function(){var e=n.state.user;e.users&&0!==e.users.user_id.length||n.state.db.collection("users").doc(e.id).delete()},n.state={editing:!1,db:v.firestore(),user:e.user},n.handleDelete=n.handleDelete.bind(Object(p.a)(n)),n.handleUpdate=n.handleUpdate.bind(Object(p.a)(n)),n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(this.CardPersonalized,null))}}]),a}(n.Component),B=function(e){Object(m.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).Form1=function(){var t=e.props.dependency;return e.state.dependency=t,r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{id:"form",onSubmit:e.handleSubmit},r.a.createElement(g.a.Group,{controlId:"formGridName"},r.a.createElement(g.a.Label,{className:"h4"},"Nombre"),r.a.createElement(g.a.Control,{placeholder:"Ej: Log\xedstica",autoComplete:"off",defaultValue:t.name})),r.a.createElement(g.a.Group,{controlId:"formGridLocation"},r.a.createElement(g.a.Label,{className:"h4"},"Lugar"),r.a.createElement(g.a.Control,{placeholder:"Ej: Cali, Colombia",autoComplete:"off",defaultValue:t.location})),r.a.createElement(g.a.Group,{controlId:"formGroupSelectCustom"},r.a.createElement(g.a.Label,{className:"h4",onClick:e.onClickUpdateCoordinator},"Coordinador ",r.a.createElement(y.a,{variant:"info"},r.a.createElement("i",{className:"fas fa-sync-alt"}))),r.a.createElement(g.a.Control,{as:"select",controlId:"formSelectUser",controlName:"formSelectUser",htmlSize:5},r.a.createElement("option",null,"Cargando..."))),r.a.createElement(g.a.Group,{as:N.a,controlId:"formGridMaxUser"},r.a.createElement(g.a.Label,null,"N\xfamero m\xe1ximo de usuarios"),r.a.createElement(g.a.Control,{onChange:e.handleChangeMaxUsers,placeholder:"Solo n\xfameros",autoComplete:"off",defaultValue:t.max_users})),r.a.createElement(g.a.Group,{id:"formGridActive"},r.a.createElement(g.a.Check,{type:"checkbox",onClick:function(t){e.setState({active:t.target.checked})},defaultChecked:t.active,label:"Activar"})),r.a.createElement(y.a,{variant:"warning",type:"submit",className:"mr-2"},"Editar"),r.a.createElement(y.a,{variant:"info",onClick:function(e){return window.location.href="./all"}},"Cancelar")),e.state.redirect?r.a.createElement(C.a,{to:"/auth-system-react/"}):void 0)},e.isNumber=function(e){for(var t=0;t<e.length;t++){var a=e[t];if(!1===Number.isInteger(parseInt(a)))return!1}return!0},e.onClickUpdateCoordinator=function(){e.state.users=e.getUsers(),setTimeout((function(){return e.chargeOptions("formGroupSelectCustom")}),600)},e.handleChangeMaxUsers=function(t){t.preventDefault(),!1===e.isNumber(t.target.value)&&(t.target.value=t.target.value.substr(0,t.target.value.length-1))},e.checkFields=function(e,t,a){return""!==e&&""!==t&&!isNaN(a)},e.submit=function(t){e.state.db.collection("dependencies").doc(e.state.dependency.id).set(t).then((function(){return window.location.href="./all"}))},e.getUsers=function(){var t=[];return e.state.db.collection("users").get().then((function(e){e.forEach((function(e){var a=e.data(),n={fullname:a.name+" "+a.last_name,email:a.email,rol:a.rol};t.push(n)}))})),t},e.state={db:v.firestore(),users:[],dependency:{},active:!1},e.handleSubmit=e.handleSubmit.bind(Object(p.a)(e)),e}return Object(s.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=document.getElementById("formGroupSelectCustom").selectedIndex,a={active:this.state.active,coordinator:-1!==t?document.getElementById("formGroupSelectCustom").childNodes[t].getAttribute("id"):"",location:document.getElementById("formGridLocation").value,max_users:parseInt(document.getElementById("formGridMaxUser").value),name:document.getElementById("formGridName").value};this.checkFields(a.name,a.location,a.max_users)?this.submit(a):alert("Todos los campos se deben llenar, excepto Coordinador que lo puede dejar vac\xedo.")}},{key:"chargeOptions",value:function(e){for(var t=this.state.users,a=document.getElementById(e);a.options.length>0;)a.remove(0);for(var n in t){var r=document.createElement("option");r.id=t[n].email,r.text=t[n].fullname,this.state.dependency.coordinator===t[n].email&&(r.selected=!0),a.add(r)}}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){return e.chargeOptions("formGroupSelectCustom")}),600)}},{key:"render",value:function(){return this.state.users=this.getUsers(),r.a.createElement("div",{className:"container"},r.a.createElement(this.Form1,null))}}]),a}(n.Component),D=function(e){Object(m.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).getUsers=function(){var t=[];return e.state.db.collection("users").get().then((function(e){e.forEach((function(e){var a=e.data(),n={id:e.id,email:a.email,last_name:a.last_name,name:a.name};t.push(n)}))})),t},e.getUserDependency=function(){var t=[];return e.state.db.collection("user_dependency").get().then((function(e){e.forEach((function(e){var a=e.data(),n={id:e.id,user_id:a.user_id};t.push(n)}))})),t},e.chargeUsers=function(t){document.getElementById(t).innerHTML="";for(var a=e.state.users,n=0;n<a.length;n++)a[n];a=(a=a.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}))).map((function(e){return r.a.createElement(_,{user:e,key:e.id})})),o.a.render(a,document.getElementById(t))},e.changeToUpdate=function(e){var t=document.getElementById("founds");t.unmountComponentAtNode=!0,o.a.render(r.a.createElement(B,{user:e}),t)},e.componentUidMount=function(){setTimeout((function(){return e.chargeUsers("founds")}),800)},e.state={users:[],user_dependency:[],db:v.firestore()},e}return Object(s.a)(a,[{key:"render",value:function(){return this.state.users=this.getUsers(),this.state.user_dependency=this.getUserDependency(),r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Gestionar Usuarios"),r.a.createElement(b.a,{className:"mb-5",variant:"info",now:100}),r.a.createElement("div",{id:"founds"}))}}]),a}(n.Component),F=function(e){Object(m.a)(a,e);var t=Object(i.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return console.log("Hola2"),r.a.createElement("div",null,"Error 404 Not Found Page.")}}]),a}(n.Component),T=r.a.createElement(r.a.Fragment,null,r.a.createElement(C.d,null,r.a.createElement(C.b,{exact:!0,path:h},r.a.createElement(d,null)),r.a.createElement(C.b,{exact:!0,path:h+"dependency/create"},r.a.createElement(O,null)),r.a.createElement(C.b,{exact:!0,path:h+"dependency/search/all"},r.a.createElement(U,null)),r.a.createElement(C.b,{exact:!0,path:h+"user/create"},r.a.createElement(w,null)),r.a.createElement(C.b,{exact:!0,path:h+"user/search/all"},r.a.createElement(D,null)),r.a.createElement(C.b,{path:"*"},r.a.createElement(F,null)))),L=a(39),M={},A=function(){return r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement(z,null),r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("span",{className:"nav-link dropdown-toggle","data-toggle":"dropdown",role:"button"},M.fullname),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement(H,null))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:h+"logout"},r.a.createElement("i",{className:"fas fa-sign-out-alt"})))))};function V(){var e=Object(n.useState)(!1),t=Object(L.a)(e,2),a=t[0],l=t[1];return r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement(z,null),r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item active"},a?r.a.createElement("form",{className:"form-inline my-2 my-lg-0"},r.a.createElement("input",{type:"text",className:"form-control  mr-sm-2",id:"Correo",placeholder:"Correo"}),r.a.createElement("input",{type:"password",className:"form-control  mr-sm-2",id:"Contrase\xf1a",placeholder:"Contrase\xf1a"}),r.a.createElement("button",{type:"submit",className:"btn btn-primary my-2 my-sm-0"},"Iniciar sesi\xf3n")):r.a.createElement("span",{onClick:function(){return l(!0)},className:"nav-link",style:{cursor:"pointer"}},"Iniciar sesi\xf3n"))))}function z(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"form-inline my-2 my-lg-0"},r.a.createElement("input",{className:"form-control mr-sm-2",type:"search",placeholder:"Buscar","aria-label":"Buscar"}),r.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"submit"},"Buscar")))}function H(){var e={cursor:"default"};return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement("span",{className:"nav-link font-weight-bold h5",style:e},"Mi perfil"),r.a.createElement("ul",{className:"nav flex-column"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link active",to:h+"user/modify/"+M.email},"Ver")))),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("span",{className:"nav-link font-weight-bold h5",style:e},"Dependencias"),r.a.createElement("ul",{className:"nav flex-column"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link active",to:h+"dependency/create"},"Crear")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link active",to:h+"dependency/search/all"},"Buscar - Editar / Eliminar")))),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("span",{className:"nav-link font-weight-bold h5",style:e},"Usuarios"),r.a.createElement("ul",{className:"nav flex-column"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link active",to:h+"user/create"},"Crear")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link active",to:h+"user/search/all"},"Buscar - Editar / Eliminar"))))))}var q=function(e){Object(m.a)(a,e);var t=Object(i.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.appname;return M=this.props.user,r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-light fixed-top",style:{backgroundColor:"silver"}},r.a.createElement("div",{className:"container"},r.a.createElement(u.b,{className:"navbar-brand",to:h},r.a.createElement("i",{className:"fas fa-user-shield"})," "+e),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),""===M.email?r.a.createElement(V,null):r.a.createElement(A,null))))}}]),a}(n.Component),P=Object(f.b)((function(e){return{user:e.user}}))(q),J=a(22),R=v.firestore(),Y={fullname:"",email:"",rol:""};R.collection("users").get().then((function(e){e.forEach((function(e){Y.fullname=e.data().name+" "+e.data().last_name,Y.email=e.data().email,Y.rol=e.data().rol}))}));var K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0,a=t.type;switch(t.payload,a){case"setUser":return Y;default:return e}},W=v.firestore(),X={dependencies:[]},Z=function(){X.dependencies=[],W.collection("dependencies").get().then((function(e){e.forEach((function(e){X.dependencies.push({id:e.id,name:e.data().name})}))}))};Z();var $=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0,a=t.type;switch(t.payload,a){case"getDependencies":return Z(),X.dependencies;default:return e}},Q=Object(J.b)({user:K,dependencies:$}),ee=Object(J.c)(Q),te=function(e){Object(m.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t="";e.state.db.collection("app").get().then((function(a){a.forEach((function(a){t=a.data().name,e.setState({appname:t})}))}))},e.state={appname:"",user:{id:"",fullname:"",email:""},db:v.firestore()},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state,t=e.appname,a=e.user;return r.a.createElement(f.a,{store:ee},r.a.createElement(u.a,null,r.a.createElement(P,{appname:t,user:a}),r.a.createElement("div",{className:"App",style:{marginTop:"6em"}},r.a.createElement("link",{rel:"stylesheet",href:"https://pro.fontawesome.com/releases/v5.10.0/css/all.css",integrity:"sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p",crossOrigin:"anonymous"}),r.a.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"}),T)))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.93bae4fd.chunk.js.map